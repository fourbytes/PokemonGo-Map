{"version":3,"sources":["../../js/map.js"],"names":[],"mappings":"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","file":"map.js","sourcesContent":["\n//\n// Global map.js variables\n//\n\nvar $selectExclude;\nvar $selectNotify;\nvar $selectHeatmap;\n\nvar language = document.documentElement.lang == \"\" ? \"en\" : document.documentElement.lang;\nvar idToPokemon = {};\n\nvar excludedPokemon = [];\nvar notifiedPokemon = [];\n\nvar map;\nvar currentHeatmap;\nvar rawDataIsLoading = false;\nvar locationMarker;\nvar marker;\nvar rmarker;\n\nvar noLabelsStyle=[{featureType:\"poi\",elementType:\"labels\",stylers:[{visibility:\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]}];\nvar light2Style=[{\"elementType\":\"geometry\",\"stylers\":[{\"hue\":\"#ff4400\"},{\"saturation\":-68},{\"lightness\":-4},{\"gamma\":0.72}]},{\"featureType\":\"road\",\"elementType\":\"labels.icon\"},{\"featureType\":\"landscape.man_made\",\"elementType\":\"geometry\",\"stylers\":[{\"hue\":\"#0077ff\"},{\"gamma\":3.1}]},{\"featureType\":\"water\",\"stylers\":[{\"hue\":\"#00ccff\"},{\"gamma\":0.44},{\"saturation\":-33}]},{\"featureType\":\"poi.park\",\"stylers\":[{\"hue\":\"#44ff00\"},{\"saturation\":-23}]},{\"featureType\":\"water\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"hue\":\"#007fff\"},{\"gamma\":0.77},{\"saturation\":65},{\"lightness\":99}]},{\"featureType\":\"water\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"gamma\":0.11},{\"weight\":5.6},{\"saturation\":99},{\"hue\":\"#0091ff\"},{\"lightness\":-86}]},{\"featureType\":\"transit.line\",\"elementType\":\"geometry\",\"stylers\":[{\"lightness\":-48},{\"hue\":\"#ff5e00\"},{\"gamma\":1.2},{\"saturation\":-23}]},{\"featureType\":\"transit\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"saturation\":-64},{\"hue\":\"#ff9100\"},{\"lightness\":16},{\"gamma\":0.47},{\"weight\":2.7}]}];\nvar darkStyle=[{\"featureType\":\"all\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"saturation\":36},{\"color\":\"#b39964\"},{\"lightness\":40}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"visibility\":\"on\"},{\"color\":\"#000000\"},{\"lightness\":16}]},{\"featureType\":\"all\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"administrative\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":20}]},{\"featureType\":\"administrative\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":17},{\"weight\":1.2}]},{\"featureType\":\"landscape\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":20}]},{\"featureType\":\"poi\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":21}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":17}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":29},{\"weight\":0.2}]},{\"featureType\":\"road.arterial\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":18}]},{\"featureType\":\"road.local\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#181818\"},{\"lightness\":16}]},{\"featureType\":\"transit\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":19}]},{\"featureType\":\"water\",\"elementType\":\"geometry\",\"stylers\":[{\"lightness\":17},{\"color\":\"#525252\"}]}];\nvar pGoStyle=[{\"featureType\":\"landscape.man_made\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#a1f199\"}]},{\"featureType\":\"landscape.natural.landcover\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"landscape.natural.terrain\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"poi.attraction\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#e4dfd9\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.park\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#84b09e\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#fafeb8\"},{\"weight\":\"1.25\"}]},{\"featureType\":\"road.highway\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"water\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#5ddad6\"}]}];\nvar light2StyleNoLabels=[{\"elementType\":\"geometry\",\"stylers\":[{\"hue\":\"#ff4400\"},{\"saturation\":-68},{\"lightness\":-4},{\"gamma\":0.72}]},{\"featureType\":\"road\",\"elementType\":\"labels.icon\"},{\"featureType\":\"landscape.man_made\",\"elementType\":\"geometry\",\"stylers\":[{\"hue\":\"#0077ff\"},{\"gamma\":3.1}]},{\"featureType\":\"water\",\"stylers\":[{\"hue\":\"#00ccff\"},{\"gamma\":0.44},{\"saturation\":-33}]},{\"featureType\":\"poi.park\",\"stylers\":[{\"hue\":\"#44ff00\"},{\"saturation\":-23}]},{\"featureType\":\"water\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"hue\":\"#007fff\"},{\"gamma\":0.77},{\"saturation\":65},{\"lightness\":99}]},{\"featureType\":\"water\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"gamma\":0.11},{\"weight\":5.6},{\"saturation\":99},{\"hue\":\"#0091ff\"},{\"lightness\":-86}]},{\"featureType\":\"transit.line\",\"elementType\":\"geometry\",\"stylers\":[{\"lightness\":-48},{\"hue\":\"#ff5e00\"},{\"gamma\":1.2},{\"saturation\":-23}]},{\"featureType\":\"transit\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"saturation\":-64},{\"hue\":\"#ff9100\"},{\"lightness\":16},{\"gamma\":0.47},{\"weight\":2.7}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]}];\nvar darkStyleNoLabels=[{\"featureType\":\"all\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"administrative\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":20}]},{\"featureType\":\"administrative\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":17},{\"weight\":1.2}]},{\"featureType\":\"landscape\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":20}]},{\"featureType\":\"poi\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":21}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":17}]},{\"featureType\":\"road.highway\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":29},{\"weight\":0.2}]},{\"featureType\":\"road.arterial\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":18}]},{\"featureType\":\"road.local\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#181818\"},{\"lightness\":16}]},{\"featureType\":\"transit\",\"elementType\":\"geometry\",\"stylers\":[{\"color\":\"#000000\"},{\"lightness\":19}]},{\"featureType\":\"water\",\"elementType\":\"geometry\",\"stylers\":[{\"lightness\":17},{\"color\":\"#525252\"}]}];\nvar pGoStyleNoLabels=[{\"featureType\":\"landscape.man_made\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#a1f199\"}]},{\"featureType\":\"landscape.natural.landcover\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"landscape.natural.terrain\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"poi.attraction\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"visibility\":\"on\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#e4dfd9\"}]},{\"featureType\":\"poi.business\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"poi.park\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#37bda2\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#84b09e\"}]},{\"featureType\":\"road\",\"elementType\":\"geometry.stroke\",\"stylers\":[{\"color\":\"#fafeb8\"},{\"weight\":\"1.25\"}]},{\"featureType\":\"road.highway\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"water\",\"elementType\":\"geometry.fill\",\"stylers\":[{\"color\":\"#5ddad6\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.stroke\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.text.fill\",\"stylers\":[{\"visibility\":\"off\"}]},{\"featureType\":\"all\",\"elementType\":\"labels.icon\",\"stylers\":[{\"visibility\":\"off\"}]}];\n\nvar selectedStyle = 'light';\n\nvar mapData = {\n    pokemon: {},\n    gyms: {},\n    pokestops: {},\n    luredPokemon: {},\n    radius: 0\n};\nvar gymTypes = [\"Uncontested\", \"Mystic\", \"Valor\", \"Instinct\"];\nvar audio = new Audio('static/sounds/ding.mp3');\nvar pokemonSprites = {\n    normal: {\n        columns: 12,\n        icon_width: 30,\n        icon_height: 30,\n        sprite_width: 360,\n        sprite_height: 390,\n        filename: 'static/icons-sprite.png',\n        name: 'Normal'\n    },\n    highres: {\n        columns: 7,\n        icon_width: 65,\n        icon_height: 65,\n        sprite_width: 455,\n        sprite_height: 1430,\n        filename: 'static/icons-large-sprite.png',\n        name: 'High-Res'\n    }\n};\n\n\n//\n// LocalStorage helpers\n//\n\nvar StoreTypes = {\n    Boolean: {\n        parse: function(str) {\n            switch(str.toLowerCase()) {\n                case '1':\n                case 'true':\n                case 'yes':\n                    return true;\n                default:\n                    return false;\n            }\n        },\n        stringify: function(b) {\n            return b ? 'true' : 'false';\n        }\n    },\n    JSON: {\n        parse: function(str) {\n            return JSON.parse(str);\n        },\n        stringify: function(json) {\n            return JSON.stringify(json);\n        }\n    },\n    String: {\n        parse: function(str) {\n            return str;\n        },\n        stringify: function(str) {\n            return str;\n        }\n    },\n    Number: {\n        parse: function(str) {\n            return parseInt(str, 10);\n        },\n        stringify: function(number) {\n            return number.toString();\n        }\n    }\n};\n\nvar StoreOptions = {\n    map_style: {\n        default: 'roadmap',\n        type: StoreTypes.String\n    },\n    rememberSelectExclude: {\n        default: [],\n        type: StoreTypes.JSON\n    },\n    rememberSelectNotift: {\n        default: [],\n        type: StoreTypes.JSON\n    },\n    rememberHeatmapPokemon: {\n        default: 0,\n        type: StoreTypes.Number\n    },\n    showGyms: {\n        default: false,\n        type: StoreTypes.Boolean\n    },\n    showPokemon: {\n        default: true,\n        type: StoreTypes.Boolean\n    },\n    showLuredPokemon: {\n        default: true,\n        type: StoreTypes.Boolean\n    },\n    showPokestops: {\n        default: true,\n        type: StoreTypes.Boolean\n    },\n    showRadius: {\n        default: true,\n        type: StoreTypes.Boolean\n    },\n    playSound: {\n        default: false,\n        type: StoreTypes.Boolean\n    },\n    geoLocate: {\n        default: false,\n        type: StoreTypes.Boolean\n    },\n    playSound: {\n        default: false,\n        type: StoreTypes.Boolean\n    },\n    pokemonIcons: {\n        default: 'highres',\n        type: StoreTypes.String\n    },\n    iconSizeModifier: {\n        default: 0,\n        type: StoreTypes.Number\n    }\n};\n\nvar Store = {\n    getOption: function(key) {\n        var option = StoreOptions[key];\n        if (!option) {\n            throw \"Store key was not defined \" + key;\n        }\n        return option;\n    },\n    get: function(key) {\n        var option = this.getOption(key);\n        var optionType = option.type;\n        var rawValue = localStorage[key];\n        if (rawValue === null || rawValue === undefined) {\n            return option.default;\n        }\n        var value = optionType.parse(rawValue);\n        return value;\n    },\n    set: function(key, value) {\n        var option = this.getOption(key);\n        var optionType = option.type || StoreTypes.String;\n        var rawValue = optionType.stringify(value);\n        localStorage[key] = rawValue;\n    },\n    reset: function(key) {\n        localStorage.removeItem(key);\n    }\n};\n\n//\n// Functions\n//\n\nfunction excludePokemon(id) {\n    $selectExclude.val(\n        $selectExclude.val().concat(id)\n    ).trigger('change')\n}\n\nfunction notifyAboutPokemon(id) {\n    $selectNotify.val(\n        $selectNotify.val().concat(id)\n    ).trigger('change')\n}\n\nfunction removePokemonMarker(id) {\n    mapData.pokemon[encounter_id].hidden = true;\n    mapData.pokemon[id].marker.setMap(null);\n}\n\nfunction initMap() {\n\n    map = new google.maps.Map(document.getElementById('map'), {\n        center: {\n            lat: center_lat,\n            lng: center_lng\n        },\n        zoom: 16,\n        fullscreenControl: true,\n        streetViewControl: false,\n\t\tmapTypeControl: true,\n\t\tmapTypeControlOptions: {\n          style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,\n          position: google.maps.ControlPosition.RIGHT_TOP,\n          mapTypeIds: [\n              google.maps.MapTypeId.ROADMAP,\n              google.maps.MapTypeId.SATELLITE,\n              'nolabels_style',\n              'dark_style',\n              'style_light2',\n              'style_pgo',\n              'dark_style_nl',\n              'style_light2_nl',\n              'style_pgo_nl']\n        },\n    });\n\n  \tvar style_NoLabels = new google.maps.StyledMapType(noLabelsStyle, {name: \"No Labels\"});\n  \tmap.mapTypes.set('nolabels_style', style_NoLabels);\n\n  \tvar style_dark = new google.maps.StyledMapType(darkStyle, {name: \"Dark\"});\n  \tmap.mapTypes.set('dark_style', style_dark);\n\n  \tvar style_light2 = new google.maps.StyledMapType(light2Style, {name: \"Light2\"});\n  \tmap.mapTypes.set('style_light2', style_light2);\n\n  \tvar style_pgo = new google.maps.StyledMapType(pGoStyle, {name: \"PokemonGo\"});\n  \tmap.mapTypes.set('style_pgo', style_pgo);\n\n    var style_dark_nl = new google.maps.StyledMapType(darkStyleNoLabels, {name: \"Dark (No Labels)\"});\n    map.mapTypes.set('dark_style_nl', style_dark_nl);\n\n    var style_light2_nl = new google.maps.StyledMapType(light2StyleNoLabels, {name: \"Light2 (No Labels)\"});\n    map.mapTypes.set('style_light2_nl', style_light2_nl);\n\n    var style_pgo_nl = new google.maps.StyledMapType(pGoStyleNoLabels, {name: \"PokemonGo (No Labels)\"});\n    map.mapTypes.set('style_pgo_nl', style_pgo_nl);\n\n    map.addListener('maptypeid_changed', function(s) {\n        Store.set('map_style', this.mapTypeId);\n    });\n\n    map.setMapTypeId(Store.get('map_style'));\n    google.maps.event.addListener(map, 'idle', updateMap);\n\n    marker = createSearchMarker();\n\n    addMyLocationButton();\n    initSidebar();\n    google.maps.event.addListenerOnce(map, 'idle', function(){\n        updateMap();\n    });\n\n    google.maps.event.addListener(map, 'zoom_changed', function() {\n        redrawPokemon(mapData.pokemon);\n        redrawPokemon(mapData.luredPokemon);\n    });\n};\n\nfunction createSearchMarker() {\n    marker = new google.maps.Marker({ //need to keep reference.\n        position: {\n            lat: center_lat,\n            lng: center_lng\n        },\n        map: map,\n        animation: google.maps.Animation.DROP,\n        draggable: true\n    });\n\n    var oldLocation = null;\n    google.maps.event.addListener(marker, 'dragstart', function() {\n        oldLocation = marker.getPosition();\n    });\n\n    google.maps.event.addListener(marker, 'dragend', function() {\n        var newLocation = marker.getPosition();\n        changeSearchLocation(newLocation.lat(), newLocation.lng())\n            .done(function() {\n                oldLocation = null;\n                setupRadiusMarker();\n            })\n            .fail(function() {\n                if (oldLocation) {\n                    marker.setPosition(oldLocation);\n                }\n            });\n    });\n\n    setupRadiusMarker();\n\n    return marker;\n}\n\nfunction initSidebar() {\n    $('#gyms-switch').prop('checked', Store.get('showGyms'));\n    $('#pokemon-switch').prop('checked', Store.get('showPokemon'));\n    $('#pokestops-switch').prop('checked', Store.get('showPokestops'));\n    $('#geoloc-switch').prop('checked', Store.get('geoLocate'));\n    $('#radius-switch').prop('checked', Store.get('showRadius'));\n    $('#sound-switch').prop('checked', Store.get('playSound'));\n\n    var searchBox = new google.maps.places.SearchBox(document.getElementById('next-location'));\n\n    searchBox.addListener('places_changed', function() {\n        var places = searchBox.getPlaces();\n\n        if (places.length == 0) {\n            return;\n        }\n\n        var loc = places[0].geometry.location;\n        changeLocation(loc.lat(), loc.lng());\n    });\n\n    var icons = $('#pokemon-icons');\n    $.each(pokemonSprites, function(key, value) {\n        icons.append($('<option></option>').attr(\"value\", key).text(value.name));\n    });\n    icons.val((pokemonSprites[Store.get('pokemonIcons')]) ? Store.get('pokemonIcons') : 'highres');\n    $('#pokemon-icon-size').val(Store.get('iconSizeModifier'));\n}\n\nfunction pad(number) { return number <= 99 ? (\"0\" + number).slice(-2) : number; }\n\nfunction pokemonLabel(name, disappear_time, pokemon_id, latitude, longitude, id) {\n    var disappearDate = new Date(disappear_time)\n\n    var contentstring = `\n        <div>\n            <b>${name}</b>\n            <span> - </span>\n            <small>\n                <a href='http://www.pokemon.com/us/pokedex/${pokemon_id}' target='_blank' title='View in Pokedex'>#${pokemon_id}</a>\n            </small>\n        </div>\n        <div>\n            Disappears at ${pad(disappearDate.getHours())}:${pad(disappearDate.getMinutes())}:${pad(disappearDate.getSeconds())}\n            <span class='label-countdown' disappears-at='${disappear_time}'>(00m00s)</span>\n        </div>\n        <div>\n            Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n        </div>\n        <div>\n            <a href='javascript:excludePokemon(${id})'>Exclude</a>&nbsp;&nbsp;\n            <a href='javascript:notifyAboutPokemon(${id})'>Notify</a>&nbsp;&nbsp;\n            <a href='javascript:removePokemonMarker(\"${id}\")'>Remove</a>&nbsp;&nbsp;\n            <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}'\n                    target='_blank' title='View in Maps'>Get directions</a>\n        </div>`;\n    return contentstring;\n}\n\nfunction gymLabel(team_name, team_id, gym_points, latitude, longitude) {\n    var gym_color = [\"0, 0, 0, .4\", \"74, 138, 202, .6\", \"240, 68, 58, .6\", \"254, 217, 40, .6\"];\n    var str;\n    if (team_id == 0) {\n        str = `<div><center>\n            <div>\n                <b style='color:rgba(${gym_color[team_id]})'>${team_name}</b><br>\n                <img height='70px' style='padding: 5px;' src='static/forts/${team_name}_large.png'>\n            </div>\n            <div>\n                Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n            </div>\n            <div>\n                <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}'\n                        target='_blank' title='View in Maps'>Get directions</a>\n            </div>\n            </center></div>`;\n    } else {\n        var gym_prestige = [2000, 4000, 8000, 12000, 16000, 20000, 30000, 40000, 50000];\n        var gym_level = 1;\n        while (gym_points >= gym_prestige[gym_level - 1]) {\n                gym_level++;\n        }\n        str = `\n            <div><center>\n            <div style='padding-bottom: 2px'>Gym owned by:</div>\n            <div>\n                <b style='color:rgba(${gym_color[team_id]})'>Team ${team_name}</b><br>\n                <img height='70px' style='padding: 5px;' src='static/forts/${team_name}_large.png'>\n            </div>\n            <div>Level: ${gym_level} | Prestige: ${gym_points}</div>\n            <div>\n                Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n            </div>\n            <div>\n                <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}'\n                        target='_blank' title='View in Maps'>Get directions</a>\n            </div>\n            </center></div>`;\n    }\n\n    return str;\n}\n\nfunction pokestopLabel(lured, last_modified, active_pokemon_id, latitude, longitude) {\n    var str;\n    if (lured) {\n        var active_pokemon = idToPokemon[active_pokemon_id];\n\n        var last_modified_date = new Date(last_modified);\n        var current_date = new Date();\n\n        var time_until_expire = current_date.getTime() - last_modified_date.getTime();\n\n        var expire_date = new Date(current_date.getTime() + time_until_expire);\n        var expire_time = expire_date.getTime();\n\n        str = `\n            <div>\n                <b>Lured Pokstop</b>\n            </div>\n            <div>\n                Lured Pokmon: ${active_pokemon}\n                <span> - </span>\n                <small>\n                    <a href='http://www.pokemon.com/us/pokedex/${active_pokemon_id}' target='_blank' title='View in Pokedex'>#${active_pokemon_id}</a>\n                </small>\n            </div>\n            <div>\n                Lure expires at ${pad(expire_date.getHours())}:${pad(expire_date.getMinutes())}:${pad(expire_date.getSeconds())}\n                <span class='label-countdown' disappears-at='${expire_time}'>(00m00s)</span></div>\n            <div>\n            <div>\n                Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n            </div>\n            <div>\n                <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}'\n                        target='_blank' title='View in Maps'>Get directions</a>\n            </div>`;\n    } else {\n        str = `\n            <div>\n                <b>Pokstop</b>\n            </div>\n            <div>\n                Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n            </div>\n            <div>\n                <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}'\n                        target='_blank' title='View in Maps'>Get directions</a>\n            </div>`;\n    }\n\n    return str;\n}\n\nfunction getGoogleSprite(index, sprite, display_height) {\n    display_height = Math.max(display_height, 3);\n    var scale = display_height / sprite.icon_height;\n    // Crop icon just a tiny bit to avoid bleedover from neighbor\n    var scaled_icon_size = new google.maps.Size(scale * sprite.icon_width - 1, scale * sprite.icon_height - 1);\n    var scaled_icon_offset = new google.maps.Point(\n        (index % sprite.columns) * sprite.icon_width * scale + 0.5,\n        Math.floor(index / sprite.columns) * sprite.icon_height * scale + 0.5);\n    var scaled_sprite_size = new google.maps.Size(scale * sprite.sprite_width, scale * sprite.sprite_height);\n    var scaled_icon_center_offset = new google.maps.Point(scale * sprite.icon_width/2, scale * sprite.icon_height/2)\n    return {\n        url: sprite.filename,\n        size: scaled_icon_size,\n        scaledSize: scaled_sprite_size,\n        origin: scaled_icon_offset,\n        anchor: scaled_icon_center_offset\n    };\n}\n\nfunction setupPokemonMarker(item, skipNotification) {\n\n    // Scale icon size up with the map exponentially\n    var icon_size = 2 + (map.getZoom()-3) * (map.getZoom()-3) * .2 + Store.get('iconSizeModifier');\n    var pokemon_index = item.pokemon_id - 1;\n    var sprite = pokemonSprites[Store.get('pokemonIcons')] || pokemonSprites['highres']\n    var icon = getGoogleSprite(pokemon_index, sprite, icon_size);\n\n    var marker = new google.maps.Marker({\n        position: {\n            lat: item.latitude,\n            lng: item.longitude\n        },\n        zIndex: 9999,\n        optimized: false,\n        map: map,\n        icon: icon,\n    });\n\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: pokemonLabel(item.pokemon_name, item.disappear_time, item.pokemon_id, item.latitude, item.longitude, item.id),\n        disableAutoPan: true\n    });\n\n    if (notifiedPokemon.indexOf(item.pokemon_id) > -1) {\n        if (!skipNotification) {\n            if (Store.get('playSound')) {\n              audio.play();\n            }\n            sendNotification('A wild ' + item.pokemon_name + ' appeared!', 'Click to load map', 'static/icons/' + item.pokemon_id + '.png', item.latitude, item.longitude);\n        }\n        // Icons still get a bounce, even on redraw\n        marker.setAnimation(google.maps.Animation.BOUNCE);\n    }\n\n    addListeners(marker);\n    return marker;\n};\n\nfunction setupGymMarker(item) {\n    var marker = new google.maps.Marker({\n        position: {\n            lat: item.latitude,\n            lng: item.longitude\n        },\n        map: map,\n        icon: 'static/forts/' + gymTypes[item.team_id] + '.png'\n    });\n\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: gymLabel(gymTypes[item.team_id], item.team_id, item.gym_points, item.latitude, item.longitude),\n        disableAutoPan: true\n    });\n\n    addListeners(marker);\n    return marker;\n};\n\nfunction setupPokestopMarker(item) {\n    var imagename = !!item.lure_expiration ? \"PstopLured\" : \"Pstop\";\n    var marker = new google.maps.Marker({\n        position: {\n            lat: item.latitude,\n            lng: item.longitude,\n\n        },\n        map: map,\n        zIndex: 2,\n        optimized: false,\n        icon: 'static/forts/' + imagename + '.png',\n    });\n\n\n    marker.infoWindow = new google.maps.InfoWindow({\n        content: pokestopLabel(!!item.lure_expiration, item.last_modified, item.active_pokemon_id, item.latitude +.003, item.longitude+ .003),\n        disableAutoPan: true\n    });\n\n    addListeners(marker);\n    return marker;\n};\n\nfunction setupRadiusMarker() {\n    if (rmarker != null) rmarker.setMap(null);\n    if (Store.get('showRadius') == false || mapData.radius == 0) return;\n    rmarker = new google.maps.Circle({\n        map: map,\n        center: marker.position,\n        radius: mapData.radius,\n        fillColor: \"rgba(70, 70, 250, 0.1)\",\n        strokeWeight: 0.4\n    });\n\n    return rmarker;\n};\n\nfunction clearSelection() {\n    if (document.selection ) {\n        document.selection.empty();\n    } else if (window.getSelection) {\n        window.getSelection().removeAllRanges();\n    }\n};\n\nfunction addListeners(marker) {\n    marker.addListener('click', function() {\n        marker.infoWindow.open(map, marker);\n        clearSelection();\n        updateLabelDiffTime();\n        marker.persist = true;\n    });\n\n    google.maps.event.addListener(marker.infoWindow, 'closeclick', function() {\n        marker.persist = null;\n    });\n\n    marker.addListener('mouseover', function() {\n        marker.infoWindow.open(map, marker);\n        clearSelection();\n        updateLabelDiffTime();\n    });\n\n    marker.addListener('mouseout', function() {\n        if (!marker.persist) {\n            marker.infoWindow.close();\n        }\n    });\n    return marker\n};\n\nfunction clearStaleMarkers() {\n    $.each(mapData.pokemon, function(key, value) {\n\n        if (mapData.pokemon[key]['disappear_time'] < new Date().getTime() ||\n                excludedPokemon.indexOf(mapData.pokemon[key]['pokemon_id']) >= 0) {\n            mapData.pokemon[key].marker.setMap(null);\n            delete mapData.pokemon[key];\n        }\n    });\n\n    $.each(mapData.luredPokemon, function(key, value) {\n\n        if (mapData.luredPokemon[key]['lure_expiration'] < new Date().getTime() ||\n                excludedPokemon.indexOf(mapData.luredPokemon[key]['pokemon_id']) >= 0) {\n            mapData.luredPokemon[key].marker.setMap(null);\n            delete mapData.luredPokemon[key];\n        }\n    });\n};\n\nfunction showInBoundsMarkers(markers) {\n    $.each(markers, function(key, value) {\n        var marker = markers[key].marker;\n        var show = false;\n        if (!markers[key].hidden) {\n            if(typeof marker.getPosition === 'function') {\n                if(map.getBounds().contains(marker.getPosition())) {\n                  show = true;\n                }\n            } else if(typeof marker.getCenter === 'function') {\n                if(map.getBounds().contains(marker.getCenter())) {\n                  show = true;\n                }\n            }\n        }\n\n        if ( show && !markers[key].marker.getMap()) {\n            markers[key].marker.setMap(map);\n        }\n        else if (!show && markers[key].marker.getMap()) {\n            markers[key].marker.setMap(null);\n        }\n    });\n}\n\nfunction loadRawData() {\n    var loadPokemon = Store.get('showPokemon');\n    var loadGyms = Store.get('showGyms');\n    var loadPokestops = Store.get('showPokestops') || Store.get('showPokemon');\n\n    var bounds = map.getBounds();\n    var swPoint = bounds.getSouthWest();\n    var nePoint = bounds.getNorthEast();\n    var swLat = swPoint.lat() - 1.0;\n    var swLng = swPoint.lng() - 1.0;\n    var neLat = nePoint.lat() + 1.0;\n    var neLng = nePoint.lng() + 1.0;\n\n    return $.ajax({\n        url: \"raw_data\",\n        type: 'GET',\n        data: {\n            'pokemon': loadPokemon,\n            'pokestops': loadPokestops,\n            'gyms': loadGyms,\n            'swLat': swLat,\n            'swLng': swLng,\n            'neLat': neLat,\n            'neLng': neLng\n        },\n        dataType: \"json\",\n        beforeSend: function() {\n            if (rawDataIsLoading) {\n                return false;\n            } else {\n                rawDataIsLoading = true;\n            }\n        },\n        complete: function() {\n            rawDataIsLoading = false;\n        }\n    })\n}\n\nfunction processPokemon(i, item) {\n    if (!Store.get('showPokemon')) {\n        return false; // in case the checkbox was unchecked in the meantime.\n    }\n    if (!(item.id in mapData.pokemon) &&\n        excludedPokemon.indexOf(item.pokemon_id) < 0) {\n        // add marker to map and item to dict\n        if (item.marker) item.marker.setMap(null);\n        item.marker = setupPokemonMarker(item);\n        mapData.pokemon[item.id] = item;\n    }\n}\n\nfunction processPokestops(i, item) {\n    if (!Store.get('showPokestops')) {\n        return false;\n    }\n    if (mapData.pokestops[item.id] == null) { // add marker to map and item to dict\n        // add marker to map and item to dict\n        if (item.marker) item.marker.setMap(null);\n        item.marker = setupPokestopMarker(item);\n        mapData.pokestops[item.id] = item;\n    }\n    else {\n        var item2 = mapData.pokestops[item.id];\n        if (!!item.lure_expiration != !!item2.lure_expiration || item.active_pokemon_id != item2.active_pokemon_id) {\n            item2.marker.setMap(null);\n            item.marker = setupPokestopMarker(item);\n            mapData.pokestops[item.id] = item;\n        }\n    }\n}\n\nfunction processLuredPokemon(i, item) {\n    if (!Store.get('showPokemon')) {\n        return false;\n    }\n    var item2 = {\n        pokestop_id: item.pokestop_id,\n        lure_expiration: item.lure_expiration,\n        pokemon_id: item.active_pokemon_id,\n        latitude: item.latitude + 0.00005,\n        longitude: item.longitude + 0.00005,\n        pokemon_name: idToPokemon[item.active_pokemon_id],\n        disappear_time: item.lure_expiration\n    };\n\n    if (item2.pokemon_id == null) {\n        return;\n    }\n\n    if (mapData.luredPokemon[item2.pokestop_id] == null && item2.lure_expiration && !item2.hidden) {\n        //if (item.marker) item.marker.setMap(null);\n        item2.marker = setupPokemonMarker(item2);\n        mapData.luredPokemon[item2.pokestop_id] = item2;\n\n    }\n    if (mapData.luredPokemon[item.pokestop_id] != null && item2.lure_expiration && item2.active_pokemon_id != mapData.luredPokemon[item2.pokestop_id].active_pokemon_id) {\n        //if (item.marker) item.marker.setMap(null);\n        mapData.luredPokemon[item2.pokestop_id].marker.setMap(null);\n\n        if(!item2.hidden) {\n            item2.marker = setupPokemonMarker(item2);\n            mapData.luredPokemon[item2.pokestop_id] = item2;\n        }\n\n    }\n\n}\n\nfunction processGyms(i, item) {\n    if (!Store.get('showGyms')) {\n        return false; // in case the checkbox was unchecked in the meantime.\n    }\n\n    if (item.id in mapData.gyms) {\n        // if team has changed, create new marker (new icon)\n        if (mapData.gyms[item.id].team_id != item.team_id) {\n            mapData.gyms[item.id].marker.setMap(null);\n            mapData.gyms[item.id].marker = setupGymMarker(item);\n        } else { // if it hasn't changed generate new label only (in case prestige has changed)\n            mapData.gyms[item.id].marker.infoWindow = new google.maps.InfoWindow({\n                content: gymLabel(gymTypes[item.team_id], item.team_id, item.gym_points, item.latitude, item.longitude),\n                disableAutoPan: true\n            });\n        }\n    }\n    else { // add marker to map and item to dict\n        if (item.marker) item.marker.setMap(null);\n        item.marker = setupGymMarker(item);\n        mapData.gyms[item.id] = item;\n    }\n\n}\n\nfunction updateMap() {\n    loadRawData().done(function (result) {\n        mapData.radius = result.searchRadius;\n        setupRadiusMarker();\n\n        $.each(result.pokemon, processPokemon);\n        $.each(result.pokestops, processPokestops);\n        $.each(result.pokestops, processLuredPokemon);\n        $.each(result.gyms, processGyms);\n        showInBoundsMarkers(mapData.pokemon);\n        showInBoundsMarkers(mapData.luredPokemon);\n        showInBoundsMarkers(mapData.gyms);\n        showInBoundsMarkers(mapData.pokestops);\n        clearStaleMarkers();\n    });\n};\n\n\n\nfunction redrawPokemon(pokemon_list) {\n    var skipNotification = true;\n    $.each(pokemon_list, function(key, value) {\n        var item =  pokemon_list[key];\n        if (!item.hidden) {\n            var new_marker = setupPokemonMarker(item, skipNotification);\n            item.marker.setMap(null);\n            pokemon_list[key].marker = new_marker;\n        }\n    });\n};\n\nvar updateLabelDiffTime = function() {\n    $('.label-countdown').each(function(index, element) {\n        var disappearsAt = new Date(parseInt(element.getAttribute(\"disappears-at\")));\n        var now = new Date();\n\n        var difference = Math.abs(disappearsAt - now);\n        var hours = Math.floor(difference / 36e5);\n        var minutes = Math.floor((difference - (hours * 36e5)) / 6e4);\n        var seconds = Math.floor((difference - (hours * 36e5) - (minutes * 6e4)) / 1e3);\n\n        var timestring;\n        if (disappearsAt < now) {\n            timestring = \"(expired)\";\n        } else {\n            timestring = \"(\";\n            if (hours > 0)\n                timestring = hours + \"h\";\n\n            timestring += (\"0\" + minutes).slice(-2) + \"m\";\n            timestring += (\"0\" + seconds).slice(-2) + \"s\";\n            timestring += \")\";\n        }\n\n        $(element).text(timestring)\n    });\n};\n\nfunction getPointDistance(pointA, pointB) {\n    return google.maps.geometry.spherical.computeDistanceBetween(pointA, pointB);\n}\n\nfunction sendNotification(title, text, icon, lat, lng) {\n    if (!(\"Notification\" in window)) {\n        return false; // Notifications are not present in browser\n    }\n    if (Notification.permission !== \"granted\") {\n        Notification.requestPermission();\n    } else {\n        var notification = new Notification(title, {\n            icon: icon,\n            body: text,\n            sound: 'sounds/ding.mp3'\n        });\n\n        notification.onclick = function () {\n            window.focus();\n            notification.close();\n\n            centerMap(lat, lng, 20);\n        };\n    }\n}\n\nfunction myLocationButton(map, marker) {\n    var locationContainer = document.createElement('div');\n\n    var locationButton = document.createElement('button');\n    locationButton.style.backgroundColor = '#fff';\n    locationButton.style.border = 'none';\n    locationButton.style.outline = 'none';\n    locationButton.style.width = '28px';\n    locationButton.style.height = '28px';\n    locationButton.style.borderRadius = '2px';\n    locationButton.style.boxShadow = '0 1px 4px rgba(0,0,0,0.3)';\n    locationButton.style.cursor = 'pointer';\n    locationButton.style.marginRight = '10px';\n    locationButton.style.padding = '0px';\n    locationButton.title = 'Your Location';\n    locationContainer.appendChild(locationButton);\n\n    var locationIcon = document.createElement('div');\n    locationIcon.style.margin = '5px';\n    locationIcon.style.width = '18px';\n    locationIcon.style.height = '18px';\n    locationIcon.style.backgroundImage = 'url(static/mylocation-sprite-1x.png)';\n    locationIcon.style.backgroundSize = '180px 18px';\n    locationIcon.style.backgroundPosition = '0px 0px';\n    locationIcon.style.backgroundRepeat = 'no-repeat';\n    locationIcon.id = 'current-location';\n    locationButton.appendChild(locationIcon);\n\n    locationButton.addEventListener('click', function() {\n        var currentLocation = document.getElementById('current-location');\n        var imgX = '0';\n        var animationInterval = setInterval(function(){\n            if(imgX == '-18') imgX = '0';\n            else imgX = '-18';\n            currentLocation.style.backgroundPosition = imgX+'px 0';\n        }, 500);\n        if(navigator.geolocation) {\n            navigator.geolocation.getCurrentPosition(function(position) {\n                var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\n                locationMarker.setVisible(true);\n                locationMarker.setOptions({'opacity': 1});\n                locationMarker.setPosition(latlng);\n                map.setCenter(latlng);\n                clearInterval(animationInterval);\n                currentLocation.style.backgroundPosition = '-144px 0px';\n            });\n        }\n        else{\n            clearInterval(animationInterval);\n            currentLocation.style.backgroundPosition = '0px 0px';\n        }\n    });\n\n    locationContainer.index = 1;\n    map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(locationContainer);\n}\n\nfunction addMyLocationButton() {\n    locationMarker = new google.maps.Marker({\n        map: map,\n        animation: google.maps.Animation.DROP,\n        position: {lat: center_lat, lng: center_lng},\n        icon: {\n            path: google.maps.SymbolPath.CIRCLE,\n            fillOpacity: 1,\n            fillColor: '#1c8af6',\n            scale: 6,\n            strokeColor: '#1c8af6',\n            strokeWeight: 8,\n            strokeOpacity: 0.3\n        }\n    });\n    locationMarker.setVisible(false);\n\n    myLocationButton(map, locationMarker);\n\n    google.maps.event.addListener(map, 'dragend', function() {\n        var currentLocation = document.getElementById('current-location');\n        currentLocation.style.backgroundPosition = '0px 0px';\n        locationMarker.setOptions({'opacity': 0.5});\n    });\n}\n\nfunction changeLocation(lat, lng) {\n    var loc = new google.maps.LatLng(lat, lng);\n    changeSearchLocation(lat, lng).done(function() {\n        map.setCenter(loc);\n        marker.setPosition(loc);\n    });\n}\n\nfunction changeSearchLocation(lat, lng) {\n    return $.post(\"next_loc?lat=\" + lat + \"&lon=\" + lng, {});\n}\n\nfunction centerMap(lat, lng, zoom) {\n    var loc = new google.maps.LatLng(lat, lng);\n\n    map.setCenter(loc);\n\n    if (zoom) {\n        map.setZoom(zoom)\n    }\n}\n\nfunction updateHeatmapOverlay() {\n    var heatmapPokemonId = Store.get('rememberHeatmapPokemon');\n    if (heatmapPokemonId == 0) return;\n\n    $selectHeatmap = $(\"#heatmap-pokemon\");\n\n    $.ajax({\n        url: \"points\",\n        type: 'GET',\n        data: {\n            'pokemon_id': heatmapPokemonId\n        },\n        dataType: \"json\",\n        beforeSend: function() {\n            $selectHeatmap.attr('disabled', true);\n        },\n        success: function(data) {\n            var heatMapData = data.points.map(function(p) { return new google.maps.LatLng(p[0], p[1]); });\n\n            if (currentHeatmap) currentHeatmap.setMap(null);\n            currentHeatmap = new google.maps.visualization.HeatmapLayer({\n                data: heatMapData,\n                radius: 20,\n                opacity: 0.75\n            });\n            currentHeatmap.setMap(map);\n\n            $selectHeatmap.attr('disabled', false);\n        }\n    })\n}\n\n//\n// Page Ready Exection\n//\n\n$(function () {\n    if (!Notification) {\n        console.log('could not load notifications');\n        return;\n    }\n\n    if (Notification.permission !== \"granted\") {\n        Notification.requestPermission();\n    }\n});\n\n$(function () {\n    function formatState (state) {\n        if (!state.id) return state.text;\n        var $state = $('<span><i class=\"pokemon-sprite n' + state.element.value.toString() + '\"></i> ' + state.text + '</span>');\n        return $state;\n    };\n\n    $selectExclude = $(\"#exclude-pokemon\");\n    $selectNotify  = $(\"#notify-pokemon\");\n    $selectHeatmap = $(\"#heatmap-pokemon\");\n    const numberOfPokemon = 151;\n\n    // Load pokemon names and populate lists\n    $.getJSON(\"static/locales/pokemon.\" + language + \".json\").done(function(data) {\n        var pokeList = [];\n\n        $.each(data, function(key, value) {\n            if(key > numberOfPokemon) return false;\n            pokeList.push( { id: key, text: value + ' - #' + key } );\n            idToPokemon[key] = value;\n        });\n\n        // setup the filter lists\n        $selectExclude.select2({\n            placeholder: \"Select Pokmon\",\n            data: pokeList,\n            templateResult: formatState\n        });\n        $selectNotify.select2({\n            placeholder: \"Select Pokmon\",\n            data: pokeList,\n            templateResult: formatState\n        });\n\n        var heatmapPokeList = pokeList;\n        heatmapPokeList.unshift({ id: 0, text: \"None\" });\n\n        $selectHeatmap.select2({\n            placeholder: \"Select Pokmon\",\n            data: heatmapPokeList,\n            templateResult: formatState\n        });\n\n        // setup list change behavior now that we have the list to work from\n        $selectExclude.on(\"change\", function(e) {\n            excludedPokemon = $(this).val().map(Number);\n            Store.set('rememberSelectExclude', excludedPokemon);\n            clearStaleMarkers();\n        });\n        $selectNotify.on(\"change\", function(e) {\n            notifiedPokemon = $(this).val().map(Number)\n            Store.set('rememberSelectNotift', notifiedPokemon);\n        });\n        $selectHeatmap.on(\"change\", function(e) {\n            Store.set('rememberHeatmapPokemon', Number($(this).val()));\n            updateHeatmapOverlay();\n        })\n\n        // recall saved lists\n        $selectExclude.val(Store.get('rememberSelectExclude')).trigger(\"change\");\n        $selectNotify.val(Store.get('rememberSelectNotift')).trigger(\"change\");\n        $selectHeatmap.val(Store.get('rememberHeatmapPokemon')).trigger(\"change\");\n    });\n\n    // run interval timers to regularly update map and timediffs\n    window.setInterval(updateLabelDiffTime, 1000);\n    window.setInterval(updateMap, 5000);\n    window.setInterval(function() {\n      if(navigator.geolocation && Store.get('geoLocate')) {\n        navigator.geolocation.getCurrentPosition(function (position){\n          var baseURL = location.protocol + \"//\" + location.hostname + (location.port ? \":\"+location.port: \"\");\n          var lat = position.coords.latitude;\n          var lon = position.coords.longitude;\n\n          //the search function makes any small movements cause a loop. Need to increase resolution\n          if(getPointDistance(marker.getPosition(), (new google.maps.LatLng(lat, lon))) > 40) //changed to 40 from PR notes, less jitter.\n          {\n            $.post(baseURL + \"/next_loc?lat=\" + lat + \"&lon=\" + lon).done(function(){\n              var center = new google.maps.LatLng(lat, lon);\n              map.panTo(center);\n              marker.setPosition(center);\n            });\n          }\n\n        });\n      }\n    }, 1000);\n\n\n    function buildSwitchChangeListener(data, data_type, storageKey) {\n        return function () {\n            Store.set(storageKey, this.checked);\n            if (this.checked) {\n                updateMap();\n            } else {\n                $.each(data[data_type], function (key, value) {\n                    data[data_type][key].marker.setMap(null);\n                });\n                data[data_type] = {}\n            }\n        }\n    }\n\n    // Setup UI element interactions\n    $('#gyms-switch').change(buildSwitchChangeListener(mapData, \"gyms\", \"showGyms\"));\n    $('#pokemon-switch').change(buildSwitchChangeListener(mapData, \"pokemon\", \"showPokemon\"));\n    $('#pokestops-switch').change(buildSwitchChangeListener(mapData, \"pokestops\", \"showPokestops\"));\n    $('#radius-switch').change(function() {\n        Store.set(\"showRadius\", this.checked);\n        setupRadiusMarker();\n    });\n\n    $('#sound-switch').change(function() {\n        Store.set(\"playSound\", this.checked);\n    });\n\n    $('#pokemon-icons').change(function() {\n        Store.set('pokemonIcons', this.value);\n        redrawPokemon(mapData.pokemon);\n        redrawPokemon(mapData.luredPokemon);\n    });\n\n    $('#pokemon-icon-size').change(function() {\n        Store.set('iconSizeModifier', this.value);\n        redrawPokemon(mapData.pokemon);\n        redrawPokemon(mapData.luredPokemon);\n    });\n\n    $('#geoloc-switch').change(function() {\n        if(!navigator.geolocation)\n            this.checked = false;\n        else\n            Store.set('geoLocate', this.checked);\n    });\n\n});\n"]}